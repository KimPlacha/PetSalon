<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
<link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">
<link rel="stylesheet" href="index.html">
<link rel="stylesheet" href="jsresponse.html">
<link rel="stylesheet" href="jstable.html">
<link rel="stylesheet" href="searchable.html">

<style>
    th{ 
        cursor: pointer;
        color:#CB997E;
            }
</style>

            <nav>
                <a href="index.html">Home</a>
                <a href="register.html">Register</a>
                <a href="sorttable.html">Registered Pets</a>
            </nav>
<table class="table table-striped">
    <tr  class="bg-info">
        <th  class="bg-info" data-colname="name" data-order="desc">Name &#9650</th>
        <th  data-colnage="age" data-order="desc">Age &#9650</th>
        <th  data-colbirthdate="birthdate" data-order="desc">Birthdate &#9650</th>
        <th  data-colgender="gender" data-order="desc">Gender &#9650</th>
        <th  data-colservice="service" data-order="desc">Service &#9650</th>
        <th  data-colbreed="breed" data-order="desc">Breed &#9650</th>
        <th  data-colpaymentmethod="paymentmethod" data-order="desc">Paymentmethod &#9650</th>
        <th  data-coldiscount="discount" data-order="desc">Discoun &#9650</th>
    </tr>
    <tbody id="myTable">
        
    </tbody>
</table>


<script>
var myArray = [
    {'name':'Kona', 'age':'4', 'birthdate':'03/21/2020','gender':'female', 'service':'nail trim', 'breed':'french bulldog', 'paymentmethod': 'cash', 'discount':'veterans'},
    {'name':'Koko', 'age':'4', 'birthdate':'07/04/2020', 'gender':'male', 'service':'flea bath','breed':'american short hair','paymentmethod': 'credit card','discount':'student'}, 
    {'name':'Kailua', 'age':'2', 'birthdate':'05/2/2022','gender':'female','service':'de-shedding','breed':'norwegian elkhound','paymentmethod': 'debit','discount':'teacher'},
    {'name':'Koa', 'age':'5', 'birthdate':'11/29/2019','gender':'male','service':'full-styling','breed':'husky','paymentmethod': 'klarna','discount':'senior'},
    {'name':'Nala', 'age':'6', 'birthdate':'3/12/2018','gender':'female', 'service':'bath & brush','breed':'pitbull','paymentmethod': 'afterpay','discount':'veterans'},
    {'name':'Matcha', 'age':'3', 'birthdate':'10/31/2021','gender':'male', 'service':'vaccines','breed':'pug','paymentmethod': 'cash','discount':'student'},
    ]

    $('#search-input').on('keyup', function(){
    var value = $(this).val()
    console.Log('Value:', value)
    var data = searchTable(value, myArray)
    buildTable(data)
    //var data =
    //buildTable(data)
})

buildTable(myArray)

function searchTable(value, data){
        var filteredData = []

        for (var i = 0; i < data.length; i++){
            value = value.toLowerCase()
            var name = data[i].name.toLowerCase()

            if (name.includes(value)){
                filteredData.push(data[i])
            }
        }

        return filteredData
    }




    
function buildTable(data){
    var table = document.getElementById('myTable')
    table.innerHTML = ''
    for (var i = 0; i < data.length; i++){
        var colname = `name-${i}`
        var colage = `age-${i}`
        var colbirth = `birth-${i}`
        var colgender = `gender-${i}`
        var colservice = `service-${i}`
        var colbreed = `breed-${i}`
        var colpaymentmethod = `paymentmethod-${i}`
        var coldiscount = `discount-${i}`

        var row = `<tr>
                <td>${data[i].name}</td>
                <td>${data[i].age}</td>
                <td>${data[i].birthdate}</td>
                <td>${data[i].gender}</td>
                <td>${data[i].service}</td>
                <td>${data[i].breed}</td>
                <td>${data[i].paymentmethod}</td>
                <td>${data[i].discount}</td>
                    </tr>`
        table.innerHTML += row
    }
}

</script>